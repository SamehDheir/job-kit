generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// User model for authentication
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  userType  UserType @default(USER) @map("user_type")
  avatarUrl String?  @map("avatar_url")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  company   Company?   @relation("UserCompany")
  jobSeeker JobSeeker? @relation("UserJobSeeker")

  @@map("users")
}

// Company profile model
model Company {
  id              String   @id @default(cuid())
  userId          String   @unique @map("user_id")
  companyName     String   @map("company_name")
  industry        String
  companySize     String   @map("company_size")
  location        String
  website         String?
  description     String?
  logo            String?
  contactPhone    String?  @map("contact_phone")
  contactEmail    String?  @map("contact_email")
  establishedYear Int?     @map("established_year")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  user User @relation("UserCompany", fields: [userId], references: [id], onDelete: Cascade)

  @@map("companies")
}

// Job Seeker profile model
model JobSeeker {
  id              String    @id @default(cuid())
  userId          String    @unique @map("user_id")
  firstName       String    @map("first_name")
  lastName        String    @map("last_name")
  dateOfBirth     DateTime? @map("date_of_birth")
  phone           String?
  address         String?
  city            String?
  country         String?
  linkedInProfile String?   @map("linkedin_profile")
  portfolioUrl    String?   @map("portfolio_url")
  currentPosition String?   @map("current_position")
  experienceLevel String?   @map("experience_level")
  expectedSalary  Int?      @map("expected_salary")
  availability    String?
  skills          String[] // Array of skills
  summary         String?
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")

  // Relations
  user User @relation("UserJobSeeker", fields: [userId], references: [id], onDelete: Cascade)

  @@map("job_seekers")
}

// Enum for user types
enum UserType {
  USER
  COMPANY
}
